{"ast":null,"code":"var _jsxFileName = \"/Users/seungah/code/seungahpyun/full-stack-open-2023/part2/phonebook/src/App.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [persons, setPersons] = useState([]);\n  const [newPerson, setNewPerson] = useState({\n    name: \"\",\n    number: \"\"\n  });\n  const [filter, setFilter] = useState(\"\");\n  const [personsToShow, setPersonsToShow] = useState([]);\n  const [message, setMessage] = useState(null);\n  useEffect(() => {\n    personService.getAll().then(initialPersons => {\n      setPersons(initialPersons);\n      setPersonsToShow(initialPersons);\n    });\n  }, []);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setMessage(null);\n    }, 5000);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [message]);\n  const addPerson = event => {\n    event.preventDefault();\n    const currentName = persons.filter(person => person.name === newPerson.name);\n    if (currentName.length === 0) {\n      personService.create(newPerson).then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n        setPersonsToShow(persons.concat(returnedPerson));\n        setMessage(`Added ${newPerson.name} to phonebook`);\n      }).catch(error => setMessage(error.response.data.error));\n    } else {\n      if (window.confirm(`${newPerson.name} is already added to phonebook, replace the old number with a new one?`)) {\n        personService.update(currentName[0].id, newPerson).then(returnedPerson => {\n          const updatedPersons = persons.map(person => person.id !== returnedPerson.id ? person : returnedPerson);\n          setPersons(updatedPersons);\n          setPersonsToShow(updatedPersons);\n          setMessage(`Updated ${newPerson.name}'s number`);\n        }).catch(error => setMessage(error.response.data.error));\n      }\n    }\n    setNewPerson({\n      name: \"\",\n      number: \"\"\n    });\n  };\n  const deletePerson = (id, name) => {\n    if (window.confirm(`Delete ${name}?`)) {\n      personService.remove(id).then(response => {\n        const updatedPersons = persons.filter(person => person.id !== id);\n        setPersons(updatedPersons);\n        setPersonsToShow(updatedPersons);\n        setMessage(`Removed ${name} from phonebook`);\n      });\n    }\n  };\n  const handleChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setNewPerson({\n      ...newPerson,\n      [name]: value\n    });\n  };\n  const filterByName = event => {\n    const search = event.target.value;\n    setFilter(search);\n    setPersonsToShow(persons.filter(person => person.name.toLowerCase().includes(search)));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Notification, {\n      message: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      filter: filter,\n      filterByName: filterByName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PersonForm, {\n      addPerson: addPerson,\n      newPerson: newPerson,\n      handleChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Persons, {\n      personsToShow: personsToShow,\n      deletePerson: deletePerson\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"j4TwEmD804Rm/JkEDC7k+sFJvGI=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","Filter","PersonForm","Persons","personService","Notification","jsxDEV","_jsxDEV","App","_s","persons","setPersons","newPerson","setNewPerson","name","number","filter","setFilter","personsToShow","setPersonsToShow","message","setMessage","getAll","then","initialPersons","timer","setTimeout","clearTimeout","addPerson","event","preventDefault","currentName","person","length","create","returnedPerson","concat","catch","error","response","data","window","confirm","update","id","updatedPersons","map","deletePerson","remove","handleChange","value","target","filterByName","search","toLowerCase","includes","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/seungah/code/seungahpyun/full-stack-open-2023/part2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newPerson, setNewPerson] = useState({ name: \"\", number: \"\" });\n  const [filter, setFilter] = useState(\"\");\n  const [personsToShow, setPersonsToShow] = useState([]);\n  const [message, setMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((initialPersons) => {\n      setPersons(initialPersons)\n      setPersonsToShow(initialPersons)\n    })\n  }, [])\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setMessage(null);\n    }, 5000);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [message]);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const currentName = persons.filter(\n      (person) => person.name === newPerson.name\n    );\n\n    if (currentName.length === 0) {\n      personService\n        .create(newPerson)\n        .then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          setPersonsToShow(persons.concat(returnedPerson));\n          setMessage(`Added ${newPerson.name} to phonebook`);\n        })\n        .catch((error) => setMessage(error.response.data.error));\n    } else {\n      if (\n        window.confirm(\n          `${newPerson.name} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        personService\n          .update(currentName[0].id, newPerson)\n          .then((returnedPerson) => {\n            const updatedPersons = persons.map((person) =>\n              person.id !== returnedPerson.id ? person : returnedPerson\n            );\n            setPersons(updatedPersons);\n            setPersonsToShow(updatedPersons);\n            setMessage(`Updated ${newPerson.name}'s number`);\n          })\n          .catch((error) => setMessage(error.response.data.error));\n      }\n    }\n    setNewPerson({ name: \"\", number: \"\" })\n  };\n\n  const deletePerson = (id, name) => {\n    if (window.confirm(`Delete ${name}?`)) {\n      personService.remove(id).then((response) => {\n        const updatedPersons = persons.filter((person) => person.id !== id);\n        setPersons(updatedPersons);\n        setPersonsToShow(updatedPersons);\n        setMessage(`Removed ${name} from phonebook`);\n      })\n    }\n  }\n\n  const handleChange = (event) => {\n    const { name, value } = event.target\n    setNewPerson({ ...newPerson, [name]: value })\n  }\n\n  const filterByName = (event) => {\n    const search = event.target.value;\n    setFilter(search)\n    setPersonsToShow(\n      persons.filter((person) => person.name.toLowerCase().includes(search))\n    )\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter filter={filter} filterByName={filterByName} />\n      <PersonForm\n        addPerson={addPerson}\n        newPerson={newPerson}\n        handleChange={handleChange}\n      />\n      <h2>Numbers</h2>\n      <Persons personsToShow={personsToShow} deletePerson={deletePerson} />\n    </div>\n  )\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}