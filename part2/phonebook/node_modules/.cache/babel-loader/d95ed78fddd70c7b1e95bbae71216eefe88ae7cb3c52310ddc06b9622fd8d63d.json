{"ast":null,"code":"import _defineProperty from\"/Users/seungah/code/seungahpyun/full-stack-open-2023/part2/phonebook/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/seungah/code/seungahpyun/full-stack-open-2023/part2/phonebook/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/seungah/code/seungahpyun/full-stack-open-2023/part2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import Filter from\"./components/Filter\";import PersonForm from\"./components/PersonForm\";import Persons from\"./components/Persons\";import personService from\"./services/persons\";import Notification from\"./components/Notification\";import'./index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState({name:\"\",number:\"\"}),_useState4=_slicedToArray(_useState3,2),newPerson=_useState4[0],setNewPerson=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),filter=_useState6[0],setFilter=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),personsToShow=_useState8[0],setPersonsToShow=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];useEffect(function(){personService.getAll().then(function(initialPersons){setPersons(initialPersons);setPersonsToShow(initialPersons);});},[]);useEffect(function(){var timer=setTimeout(function(){setMessage(null);},5000);return function(){clearTimeout(timer);};},[message]);var addPerson=function addPerson(event){event.preventDefault();var currentName=persons.filter(function(person){return person.name===newPerson.name;});if(currentName.length===0){personService.create(newPerson).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));setPersonsToShow(persons.concat(returnedPerson));setMessage(\"Added \".concat(newPerson.name,\" to phonebook\"));}).catch(function(error){return setMessage(error.response.data.error);});}else{if(window.confirm(\"\".concat(newPerson.name,\" is already added to phonebook, replace the old number with a new one?\"))){personService.update(currentName[0].id,newPerson).then(function(returnedPerson){var updatedPersons=persons.map(function(person){return person.id!==returnedPerson.id?person:returnedPerson;});setPersons(updatedPersons);setPersonsToShow(updatedPersons);setMessage(\"Updated \".concat(newPerson.name,\"'s number\"));}).catch(function(error){return setMessage(error.response.data.error);});}}setNewPerson({name:\"\",number:\"\"});};var deletePerson=function deletePerson(id,name){if(window.confirm(\"Delete \".concat(name,\"?\"))){personService.remove(id).then(function(response){var updatedPersons=persons.filter(function(person){return person.id!==id;});setPersons(updatedPersons);setPersonsToShow(updatedPersons);setMessage(\"Removed \".concat(name,\" from phonebook\"));});}};var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setNewPerson(_objectSpread(_objectSpread({},newPerson),{},_defineProperty({},name,value)));};var filterByName=function filterByName(event){var search=event.target.value;setFilter(search);setPersonsToShow(persons.filter(function(person){return person.name.toLowerCase().includes(search);}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:message}),/*#__PURE__*/_jsx(Filter,{filter:filter,filterByName:filterByName}),/*#__PURE__*/_jsx(PersonForm,{addPerson:addPerson,newPerson:newPerson,handleChange:handleChange}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{personsToShow:personsToShow,deletePerson:deletePerson})]});};export default App;","map":{"version":3,"names":["useState","useEffect","Filter","PersonForm","Persons","personService","Notification","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","persons","setPersons","_useState3","name","number","_useState4","newPerson","setNewPerson","_useState5","_useState6","filter","setFilter","_useState7","_useState8","personsToShow","setPersonsToShow","_useState9","_useState10","message","setMessage","getAll","then","initialPersons","timer","setTimeout","clearTimeout","addPerson","event","preventDefault","currentName","person","length","create","returnedPerson","concat","catch","error","response","data","window","confirm","update","id","updatedPersons","map","deletePerson","remove","handleChange","_event$target","target","value","_objectSpread","_defineProperty","filterByName","search","toLowerCase","includes","children"],"sources":["/Users/seungah/code/seungahpyun/full-stack-open-2023/part2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\nimport './index.css';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newPerson, setNewPerson] = useState({ name: \"\", number: \"\" });\n  const [filter, setFilter] = useState(\"\");\n  const [personsToShow, setPersonsToShow] = useState([]);\n  const [message, setMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n      setPersonsToShow(initialPersons);\n    });\n  }, []);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setMessage(null);\n    }, 5000);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [message]);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const currentName = persons.filter(\n      (person) => person.name === newPerson.name\n    );\n\n    if (currentName.length === 0) {\n      personService\n        .create(newPerson)\n        .then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          setPersonsToShow(persons.concat(returnedPerson));\n          setMessage(`Added ${newPerson.name} to phonebook`);\n        })\n        .catch((error) => setMessage(error.response.data.error));\n    } else {\n      if (\n        window.confirm(\n          `${newPerson.name} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        personService\n          .update(currentName[0].id, newPerson)\n          .then((returnedPerson) => {\n            const updatedPersons = persons.map((person) =>\n              person.id !== returnedPerson.id ? person : returnedPerson\n            );\n            setPersons(updatedPersons);\n            setPersonsToShow(updatedPersons);\n            setMessage(`Updated ${newPerson.name}'s number`);\n          })\n          .catch((error) => setMessage(error.response.data.error));\n      }\n    }\n    setNewPerson({ name: \"\", number: \"\" });\n  };\n\n  const deletePerson = (id, name) => {\n    if (window.confirm(`Delete ${name}?`)) {\n      personService.remove(id).then((response) => {\n        const updatedPersons = persons.filter((person) => person.id !== id);\n        setPersons(updatedPersons);\n        setPersonsToShow(updatedPersons);\n        setMessage(`Removed ${name} from phonebook`);\n      });\n    }\n  };\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n    setNewPerson({ ...newPerson, [name]: value });\n  };\n\n  const filterByName = (event) => {\n    const search = event.target.value;\n    setFilter(search);\n    setPersonsToShow(\n      persons.filter((person) => person.name.toLowerCase().includes(search))\n    );\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter filter={filter} filterByName={filterByName} />\n      <PersonForm\n        addPerson={addPerson}\n        newPerson={newPerson}\n        handleChange={handleChange}\n      />\n      <h2>Numbers</h2>\n      <Persons personsToShow={personsToShow} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}